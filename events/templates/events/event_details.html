{% extends 'base.html' %}

{% block content %}

<div class="row">

        <div class="col-lg-12">

          <div class="card mt-4">
            <img width="500" height="500" class="card-img-top img-fluid" src="{{MEDIA_URL}}{{event.image}}" alt="">
            <div class="card-body">
              <h3 class="card-title">{{event.event_name}}</h3>
              
              <p class="card-text">{{event.description}}</p>
              <p> On: {{event.date}}</p>
              <p> Capacity: {{event.capacity}}</p>
              <p> Available: {{available}}</p>
              <h4>â‚¬{{event.price}}</h4>
              </div>
          </div>
          {% if user.is_authenticated %}
            {% if user.profile %}
            
            <p> user authenticated and profile</p>
            <div>
            <form action="{% url 'event_booking' %}">
              
              <input type="hidden" name="id" value="{{event.id}}"/>
              <p>Quantity: <input type="number" name="quantity" min="1" max="{{available}}"></p>
              
              
              
              {% if can_book %}
              <input class="btn btn-success" type="submit" value="Add to booking"/>
              {% else %}
              <a href="{%  url 'events_list' %}" class="btn btn-success" role="button">Fully Booked Back</a>
              {% endif %}
            </form>
          </div>
            {% else %}
            <p> user authenticated no profile</p>
            <div>
            <form action="{% url 'event_booking' %}">
              
              <a href="{% url 'add_profile' %}?next={{request.path}}" class="btn btn-success" role="button">please complete your profile</a>
              
            </form>
          </div>
            {% endif %}
          {% else %}
          <p>user not authenticated</p>
          <a href="{% url 'login' %}?next={% url 'event_details' event.id %}" class="btn btn-success" role="button">please log in for further options</a>
          {% endif %}
         
          
        
{% endblock %}